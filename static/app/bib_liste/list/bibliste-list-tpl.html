<div ng-include src="'static/app/components/header-template.html'"  onload=""  autoscroll=""></div>

<div class="container main-zone" style="padding:1px" >
    <!--Panel général de la page-->
    <div class="panel panel-default" id="listes-zone" style="padding:10px">
        <!--Titre du panel général contenant les principaux boutons d'action-->
        <div class="panel-heading">
            <div class="row">
                <div class="col-md-6">
                    <h3>Liste des listes ({{ctrl.count_listes}} listes)</h3>
                </div>
                <div class="col-md-6">
                    <a  ng-if="ctrl.userRights.low"
                        class="btn btn-primary pull-right"
                        ng-attr-href="#!/listes/new"
                        style="margin-top: 12px">
                        Créer nouvelle liste
                    </a>

                    <button ng-if="!ctrl.userRights.low"
                            class="btn btn-primary pull-right"
                            ng-disabled="!ctrl.userRights.low"
                            style="margin-top: 12px">
                            Créer nouvelle liste
                    </button>

                    <a
                        ng-if="ctrl.userRights.low"
                        class="btn btn-primary pull-right"
                        ng-attr-href="#!/listes/add"
                        title="Ajouter ou Retirer des noms à une liste"
                        data-toggle="tooltip"
                        style="margin-top: 12px; margin-right: 8px">
                        Gérer les noms
                    </a>
                    <button ng-if="!ctrl.userRights.low"
                            class="btn btn-primary pull-right"
                            ng-disabled="!ctrl.userRights.low"
                            title="Ajouter ou Retirer des noms à une liste"
                            data-toggle="tooltip"
                            style="margin-top: 12px; margin-right: 8px">
                            Gérer les noms
                    </button>
                </div>
            </div>
        </div>
        <!--Corps du panel général-->
        <div class="panel-body">
            <!--Tableau des taxons-->

            <div class="modal-body" ng-if="ctrl.showSpinner" >
                    <div style="margin: 0px auto; width: 256px;">
                        <img src="static/images/spinner.gif" id="il_fi" alt="Chargement..." height="256" width="256">
                    </div>
            </div>
            <table ng-table="ctrl.tableParams" ng-hide="ctrl.showSpinner" show-filter="true" class="table table-condensed table-bordered table-striped">
                <tbody>
                    <tr ng-repeat="lst in $data" class="{{lst.customClass}}" >

                        <div> <!-- Button -->
                            <td data-title="'Voir'" class="{{lst.customBtnClass}}">
                                <a  class="btn btn-success"
                                    href="#!/listes/{{lst.id_liste}}"
                                    title="Détail de la liste {{ lst.nom_liste }}"
                                    data-toggle="tooltip">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </a>
                            </td>

                            <td data-title="'Editer'" class="{{lst.customBtnClass}}">
                                <a  ng-if="ctrl.userRights.low"
                                    class="btn btn-success"
                                    ng-attr-href="#!/listes/edit/{{lst.id_liste}}"
                                    title="Editer la liste {{ lst.nom_liste }}"
                                    data-toggle="tooltip">
                                    <span class="glyphicon glyphicon-pencil"></span>
                                </a>

                                <button ng-if="!ctrl.userRights.low"
                                  class="btn btn-success"
                                  ng-disabled="!ctrl.userRights.low">
                                    <span class="glyphicon glyphicon-pencil"></span>
                                </button>
                            </td>

                            <td data-title="'Export'" class="{{lst.customBtnClass}}">
                                <button type="button"
                                        ng-csv="ctrl.getArray(lst.id_liste)"
                                        csv-header="['cd_ref', 'nom_complet_html', 'nom_complet', 'cd_sup', 'lb_auteur', 'nom_valide', 'classe', 'lb_nom', 'cd_nom', 'group2_inpn', 'id_rang', 'id_habitat', 'cd_taxsup', 'ordre', 'phylum', 'nom_vern_eng', 'group1_inpn', 'regne', 'famille']"

                                        csv-column-order = "['cd_ref','nom_complet_html', 'nom_complet', 'cd_sup', 'lb_auteur', 'nom_valide', 'classe', 'lb_nom', 'cd_nom', 'group2_inpn', 'id_rang', 'id_habitat', 'cd_taxsup', 'ordre', 'phylum', 'nom_vern_eng', 'group1_inpn', 'regne', 'famille']"

                                        filename="{{ lst.nom_liste }}.csv"
                                        ng-disabled="!ctrl.userRights.low"
                                        class="btn btn-success"
                                        title="Exporter la liste {{ lst.nom_liste }}.csv"
                                        data-toggle="tooltip">
                                    <span class="glyphicon glyphicon-cloud-download"></span>
                                </button>
                            </td>

                            <td data-title="'Peupler'" class="{{lst.customBtnClass}}">
                                <a
                                    class="btn btn-success"
                                    ng-if="ctrl.userRights.low"
                                    ng-attr-href="#!/listes/add/{{ lst.id_liste }}"
                                    class="btn btn-success"
                                    title="Peupler la liste {{ lst.nom_liste }}"
                                    data-toggle="tooltip">
                                    <span class="glyphicon glyphicon-list"></span>
                                </a>
                                <button ng-if="!ctrl.userRights.low"
                                  class="btn btn-success"
                                  ng-disabled="!ctrl.userRights.low">
                                    <span class="glyphicon glyphicon-list"></span>
                                </button>
                            </td>
                        <div> <!-- END Button -->

                        <td data-title="'Nom de la liste'" sortable="'nom_liste'" filter="{ 'nom_liste': 'text' }"
                          ng-if="ctrl.tableCols['nom_liste'].show">
                          <img ng-src="./static/{{lst.picto}}" class="img-circle" width="25" height="25" ng-if="lst.picto"> {{ lst.nom_liste }}
                        </td>
                        <td data-title="'règne'" sortable="'regne'" filter="{ 'regne': 'text' }" ng-if="ctrl.tableCols['regne'].show">{{ lst.regne }}
                        </td>
                        <td data-title="'Group2 INPN'" sortable="'group2_inpn'" filter="{ 'group2_inpn': 'text' }" ng-if="ctrl.tableCols['group2_inpn'].show">{{ lst.group2_inpn }}
                        </td>
                        <td data-title="'Nombre de noms'" sortable="'nb_taxons'" ng-if="ctrl.tableCols['nb_taxons'].show">{{ lst.nb_taxons }}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
